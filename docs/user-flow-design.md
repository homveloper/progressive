# JSON Schema Table Editor - 유저 플로우 설계

## 📊 전체 유저 플로우 다이어그램

```mermaid
graph TD
    Start([홈페이지 접속]) --> A{로그인 상태?}
    A -->|Yes| B[대시보드]
    A -->|No| C[로그인 페이지]
    C --> D[로그인]
    D --> B
    
    B --> E[사이드바 메뉴]
    E --> F{워크스페이스 선택}
    
    F -->|기존 워크스페이스| G[워크스페이스 대시보드]
    F -->|신규 생성| H[워크스페이스 생성 모달]
    
    H --> I[워크스페이스 정보 입력]
    I --> J[워크스페이스 생성 완료]
    J --> G
    
    G --> K{테이블 관리}
    K -->|기존 테이블 선택| L[테이블 편집기]
    K -->|신규 테이블 생성| M[테이블 생성 페이지]
    
    M --> N{Schema 입력 방법}
    N -->|파일 업로드| O[JSON Schema 파일 선택]
    N -->|직접 입력| P[Schema Editor]
    N -->|템플릿 선택| Q[템플릿 갤러리]
    
    O --> R[Schema 검증]
    P --> R
    Q --> R
    
    R -->|검증 성공| S[테이블 메타데이터 설정]
    R -->|검증 실패| T[에러 메시지]
    T --> N
    
    S --> U[테이블 생성]
    U --> L
    
    L --> V[엑셀형 데이터 그리드]
    V --> W{데이터 작업}
    
    W -->|행 추가| X[새 행 입력]
    W -->|셀 편집| Y[인라인 에디터]
    W -->|행 삭제| Z[삭제 확인]
    W -->|필터/정렬| AA[필터 패널]
    W -->|내보내기| AB[Export 옵션]
    
    X --> V
    Y --> V
    Z --> V
    AA --> V
    AB --> AC[다운로드]
    
    style Start fill:#e1f5fe
    style B fill:#c8e6c9
    style L fill:#ffecb3
    style V fill:#fff3e0
```

## 🔄 상세 유저 플로우

### 1. 초기 진입 플로우

```mermaid
flowchart LR
    A[홈페이지] --> B{인증 체크}
    B -->|미인증| C[로그인/회원가입]
    B -->|인증됨| D[대시보드]
    C --> E[인증 완료]
    E --> D
    D --> F[최근 작업 표시]
    F --> G[워크스페이스 목록]
```

### 2. 워크스페이스 관리 플로우

```mermaid
flowchart TD
    A[사이드바] --> B[워크스페이스 드롭다운]
    B --> C{선택}
    
    C -->|기존 선택| D[워크스페이스 전환]
    C -->|신규 생성| E[생성 모달]
    C -->|설정| F[워크스페이스 설정]
    
    E --> G[이름 입력]
    G --> H[설명 입력]
    H --> I[권한 설정]
    I --> J[생성 확인]
    J --> K[새 워크스페이스 활성화]
    
    D --> K
    K --> L[테이블 목록 표시]
```

### 3. 테이블 생성 플로우

```mermaid
flowchart TD
    A[워크스페이스 대시보드] --> B[테이블 생성 버튼]
    B --> C[테이블 생성 페이지]
    
    C --> D{Schema 입력 방법 선택}
    
    D -->|업로드| E[파일 선택기]
    E --> F[JSON 파일 파싱]
    
    D -->|직접 입력| G[코드 에디터]
    G --> H[실시간 검증]
    
    D -->|템플릿| I[템플릿 목록]
    I --> J[템플릿 선택]
    J --> K[템플릿 커스터마이징]
    
    F --> L{Schema 검증}
    H --> L
    K --> L
    
    L -->|유효| M[테이블 설정]
    L -->|무효| N[에러 표시]
    N --> D
    
    M --> O[테이블 이름]
    O --> P[테이블 설명]
    P --> Q[초기 데이터 옵션]
    Q --> R[생성 실행]
    R --> S[테이블 편집기로 이동]
```

### 4. 데이터 편집 플로우

```mermaid
flowchart LR
    A[테이블 편집기] --> B[데이터 그리드]
    
    B --> C{사용자 액션}
    
    C -->|셀 클릭| D[셀 선택]
    D --> E[더블클릭/Enter]
    E --> F[편집 모드]
    F --> G{입력}
    G -->|완료| H[데이터 저장]
    G -->|취소| I[원본 복구]
    
    C -->|행 추가| J[빈 행 생성]
    J --> K[기본값 적용]
    K --> B
    
    C -->|행 선택| L[행 하이라이트]
    L --> M{행 작업}
    M -->|복사| N[클립보드 복사]
    M -->|삭제| O[삭제 확인]
    M -->|복제| P[행 복제]
    
    H --> B
    I --> B
    O --> B
    P --> B
```

## 📱 화면별 상세 설계

### 1. 홈페이지 (Landing Page)
```yaml
URL: /
구성요소:
  - 헤더: 로고, 로그인/회원가입 버튼
  - 히어로 섹션: 제품 소개
  - 기능 소개: 주요 기능 3-4개
  - CTA: 시작하기 버튼
상태:
  - 미인증: 로그인/회원가입 표시
  - 인증됨: 대시보드로 리다이렉트
```

### 2. 대시보드
```yaml
URL: /dashboard
구성요소:
  - 사이드바: 워크스페이스 선택기
  - 메인 영역:
    - 최근 작업한 테이블
    - 빠른 액세스
    - 통계 위젯
액션:
  - 워크스페이스 전환
  - 테이블 바로가기
  - 새 테이블 생성
```

### 3. 워크스페이스 대시보드
```yaml
URL: /workspace/{id}
구성요소:
  - 헤더: 워크스페이스 이름, 설정
  - 테이블 그리드:
    - 테이블 카드 (썸네일, 이름, 수정일)
    - 생성 버튼
  - 필터/검색: 테이블 검색
액션:
  - 테이블 생성
  - 테이블 열기
  - 테이블 삭제
  - 테이블 복제
```

### 4. 테이블 생성 페이지
```yaml
URL: /workspace/{id}/table/new
구성요소:
  - Step 1: Schema 입력
    - 탭: 업로드 | 에디터 | 템플릿
    - 검증 상태 표시
  - Step 2: 테이블 설정
    - 이름 입력
    - 설명 입력
    - 옵션 설정
  - 액션 버튼: 취소 | 생성
상태:
  - Schema 미입력
  - Schema 검증 중
  - Schema 유효
  - Schema 무효
```

### 5. 테이블 편집기
```yaml
URL: /workspace/{wid}/table/{tid}
구성요소:
  - 툴바:
    - 행 추가/삭제
    - 필터/정렬
    - 가져오기/내보내기
    - 저장 상태
  - 데이터 그리드:
    - 헤더 행 (컬럼명, 타입)
    - 데이터 행
    - 페이지네이션
  - 사이드 패널:
    - Schema 뷰어
    - 필터 옵션
    - 히스토리
액션:
  - 셀 편집
  - 행 CRUD
  - 필터/정렬
  - 내보내기
  - 실행 취소/다시 실행
```

## 🔀 상태 전이 다이어그램

### 테이블 생성 상태

```mermaid
stateDiagram-v2
    [*] --> 초기화
    초기화 --> Schema입력대기
    
    Schema입력대기 --> Schema검증중: 입력 완료
    Schema검증중 --> Schema유효: 검증 성공
    Schema검증중 --> Schema무효: 검증 실패
    Schema무효 --> Schema입력대기: 수정
    
    Schema유효 --> 메타데이터입력
    메타데이터입력 --> 생성중: 생성 버튼
    생성중 --> 생성완료: 성공
    생성중 --> 생성실패: 실패
    생성실패 --> 메타데이터입력: 재시도
    
    생성완료 --> [*]
```

### 셀 편집 상태

```mermaid
stateDiagram-v2
    [*] --> 읽기모드
    읽기모드 --> 선택됨: 클릭
    선택됨 --> 편집모드: 더블클릭/Enter
    선택됨 --> 읽기모드: ESC/외부클릭
    
    편집모드 --> 검증중: 입력
    검증중 --> 유효: 검증 통과
    검증중 --> 무효: 검증 실패
    
    유효 --> 저장중: Enter/Tab
    무효 --> 편집모드: 수정 필요
    
    저장중 --> 저장완료: 성공
    저장중 --> 저장실패: 실패
    
    저장완료 --> 읽기모드
    저장실패 --> 편집모드: 재시도
    편집모드 --> 읽기모드: ESC
```

## 🎯 주요 인터랙션 포인트

### 1. 워크스페이스 선택기
```markdown
트리거: 사이드바 드롭다운 클릭
동작:
  1. 드롭다운 메뉴 열기
  2. 워크스페이스 목록 표시
  3. 현재 선택된 항목 하이라이트
  4. "새 워크스페이스" 옵션 표시
피드백:
  - 호버 효과
  - 선택 시 즉시 전환
  - 로딩 인디케이터
```

### 2. Schema 업로드
```markdown
트리거: 파일 선택 또는 드래그 앤 드롭
동작:
  1. 파일 유효성 검사 (.json)
  2. 파일 내용 파싱
  3. Schema 검증
  4. 결과 표시
피드백:
  - 업로드 진행률
  - 성공/실패 메시지
  - 에러 상세 정보
```

### 3. 셀 편집
```markdown
트리거: 셀 더블클릭 또는 F2
동작:
  1. 편집 모드 활성화
  2. 타입별 에디터 표시
  3. 실시간 검증
  4. 저장/취소
피드백:
  - 편집 중 표시 (border)
  - 검증 에러 툴팁
  - 저장 성공 플래시
```

### 4. 행 추가
```markdown
트리거: "행 추가" 버튼 또는 Ctrl+Shift+N
동작:
  1. 새 행 생성
  2. 기본값 적용
  3. 첫 번째 셀 포커스
  4. 편집 모드 진입
피드백:
  - 새 행 하이라이트
  - 스크롤 자동 이동
  - 행 번호 업데이트
```

## 🔒 예외 처리 플로우

### Schema 검증 실패
```mermaid
flowchart LR
    A[Schema 입력] --> B{검증}
    B -->|실패| C[에러 메시지]
    C --> D[에러 위치 표시]
    D --> E[수정 가이드]
    E --> F[재입력]
    F --> B
    B -->|성공| G[다음 단계]
```

### 네트워크 오류
```mermaid
flowchart LR
    A[데이터 작업] --> B{API 호출}
    B -->|실패| C[오프라인 모드]
    C --> D[로컬 저장]
    D --> E[재시도 큐]
    E --> F{연결 복구}
    F -->|Yes| G[동기화]
    F -->|No| E
```

## 📝 네비게이션 구조

```
/
├── /login
├── /signup
├── /dashboard
├── /workspace
│   ├── /new
│   └── /{workspace-id}
│       ├── /settings
│       ├── /members
│       └── /table
│           ├── /new
│           └── /{table-id}
│               ├── /edit
│               ├── /schema
│               └── /history
└── /profile
    └── /settings
```

## 🎨 UI 컴포넌트 맵

### 공통 컴포넌트
- Header
- Sidebar
- Breadcrumb
- Modal
- Toast
- Dropdown
- Button
- Input
- FileUpload

### 도메인 컴포넌트
- WorkspaceSelector
- TableCard
- SchemaEditor
- DataGrid
- CellEditor
- FilterPanel
- ExportDialog
- HistoryPanel

## 📱 반응형 고려사항

### Desktop (1920px+)
- 3열 레이아웃 (사이드바 + 메인 + 패널)
- 전체 기능 노출

### Tablet (768px - 1919px)
- 2열 레이아웃 (사이드바 토글 + 메인)
- 주요 기능 우선

### Mobile (< 768px)
- 1열 레이아웃
- 하단 네비게이션
- 읽기 전용 모드 우선
- 제한적 편집 기능

## ✅ 체크포인트

### 사용성 검증
- [ ] 3클릭 이내 주요 작업 도달
- [ ] 명확한 피드백 제공
- [ ] 실행 취소 가능
- [ ] 에러 복구 경로 제공

### 접근성 검증
- [ ] 키보드 네비게이션
- [ ] 스크린 리더 지원
- [ ] 색상 대비 4.5:1 이상
- [ ] 포커스 표시 명확

### 성능 검증
- [ ] 초기 로딩 3초 이내
- [ ] 인터랙션 응답 100ms 이내
- [ ] 10,000행 처리 가능
- [ ] 오프라인 모드 지원